

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Sources &mdash; digitransit transportkollektiv cookbook</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/togglebutton.js"></script>
        <script >var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="Stadtnavi extensions" href="stadtnavi-extensions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/digitransit.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation/index.html">Installation guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation/requirements.html">Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation/requirements.html#optional">optional</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation/step-by-step.html">Step-by-step guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#preparing-your-build-host">0. Preparing your build host</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#building-an-opentripplanner-graph">1. Building an OpenTripPlanner Graph</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation/step-by-step.html#method-1-vsh-style-modifying-of-opentripplanner-data-container">Method 1: vsh-style modifying of opentripplanner-data-container</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation/step-by-step.html#method-2-muenster-style-custom-container">Method 2: muenster-style custom container</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#building-hsl-map-server">2. Building hsl-map-server</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#using-photon-pelias-adapter">3. Using photon-pelias-adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#building-digitransit-ui">4. Building digitransit-ui</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#building-digitransit-proxy">5. Building digitransit-proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#crafting-kubernetes-yaml">6. Crafting kubernetes yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#deploying">7. Deploying</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#id4">8. ???</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#profit">9. Profit!</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/step-by-step.html#todo">TODO</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation/faq.html">Frequently Asked Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="repo-overview.html">Repository Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="repo-overview.html#herrenberg-stadtnavi">Herrenberg, stadtnavi</a></li>
<li class="toctree-l2"><a class="reference internal" href="repo-overview.html#hsl">HSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="repo-overview.html#oulu">Oulu</a></li>
<li class="toctree-l2"><a class="reference internal" href="repo-overview.html#turin">Turin</a></li>
<li class="toctree-l2"><a class="reference internal" href="repo-overview.html#ulm-verschworhaus">Ulm, Verschwörhaus</a></li>
<li class="toctree-l2"><a class="reference internal" href="repo-overview.html#ulm-ulm-dev">Ulm, ulm.dev</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stadtnavi-extensions.html">Stadtnavi extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="stadtnavi-extensions.html#dynamic-parking-lots-routing-and-map-layer">Dynamic parking lots routing and map layer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stadtnavi-extensions.html#opentripplanner">OpenTripPlanner</a></li>
<li class="toctree-l3"><a class="reference internal" href="stadtnavi-extensions.html#frontend">Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="stadtnavi-extensions.html#config">Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="stadtnavi-extensions.html#related-pull-requests-commits">Related pull requests &amp; commits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="stadtnavi-extensions.html#free-floating-bicycle-and-scooter-sharing">Free-floating bicycle and scooter sharing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stadtnavi-extensions.html#id1">OpenTripPlanner</a></li>
<li class="toctree-l3"><a class="reference internal" href="stadtnavi-extensions.html#map-layer">Map layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="stadtnavi-extensions.html#id2">Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="stadtnavi-extensions.html#id3">Related pull requests &amp; commits</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Sources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#gtfs">GTFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gbfs">GBFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#openstreetmap">OpenStreetMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parkendd-parkapi">ParkenDD ParkAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#geojson">GeoJSON</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">digitransit-tk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Data Sources</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- User defined GitHub URL -->
              <a href="https://github.com/transportkollektiv/digitransit-setup/tree/main/src/datasources.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-sources">
<h1>Data Sources<a class="headerlink" href="#data-sources" title="Permalink to this headline">¶</a></h1>
<p>This is a list of Digitransit data sources, formats and their capabilities.</p>
<div class="section" id="gtfs">
<span id="datasources-gtfs"></span><h2>GTFS<a class="headerlink" href="#gtfs" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/General_Transit_Feed_Specification">GTFS (General Transport Feed Specification)</a> is a common exchange format for public (static) transit schedules and related information such as stop locations etcetera. It is the default format OpenTripPlanner is using for public transport routing.</p>
<p>For live updates like vehicle positions, delays and temporary service disruptions <a class="reference external" href="https://gtfs.org/reference/realtime/v2/">GTFS-RT</a> (GTFS Realtime) can be used as an addition to GTFS. OpenTripPlanner is able to process GTFS-RT, if trip IDs are matching the GTFS-feeds IDs.</p>
<p>If public transport agencies provide their data to other external services like Google Maps or Apple Maps, they are definitely able to provide GTFS-data.</p>
<p>If OTP/digitransit only shows straight lines between trips, the <code class="docutils literal notranslate"><span class="pre">shapes.txt</span></code> file is missing in the GTFS. Not all agencies are able to export them or can’t export them for copyright reasons. The tool <a class="reference external" href="https://github.com/ad-freiburg/pfaedle">pfaedle</a> is able to add these shapes to an existing GTFS file. It also looks like <a class="reference external" href="http://www.arcgis.com/home/item.html?id=ce51601e18ae4367814a8a53a1659b33">ArcGIS is able</a> to generate the <code class="docutils literal notranslate"><span class="pre">shapes.txt</span></code> file from GTFS.</p>
</div>
<div class="section" id="gbfs">
<span id="datasources-gbfs"></span><h2>GBFS<a class="headerlink" href="#gbfs" title="Permalink to this headline">¶</a></h2>
<p>GBFS is a data format/API for publishing status information of bikesharing systems, but can also used for kinds of sharing vehicles, like E-scooters and cars. It publishes state and geolocation of available vehicles and stations/docks (but not currently rented vehicles).</p>
<p>Most bike- and scootersharing operators are able to provide GBFS, also most whitelabel sharing software is able to provide GBFS. If sharing operators provide <a class="reference external" href="https://github.com/openmobilityfoundation/mobility-data-specification">MDS</a> data the authorities, a public GBFS-feed is part of the specification.</p>
<p>The specification is available <a class="reference external" href="https://github.com/NABSA/gbfs">on Github</a></p>
<p>OpenTripPlanner supports multimodal routing of station based sharing systems with GBFS by default. For free floating systems <a class="reference internal" href="stadtnavi-extensions.html#stadtnavi-extensions-free-floating"><span class="std std-ref">Stadtnavi extension</span></a> can be used.</p>
</div>
<div class="section" id="openstreetmap">
<span id="datasources-openstreetmap"></span><h2>OpenStreetMap<a class="headerlink" href="#openstreetmap" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://openstreetmap.org/">OpenStreetMap</a> is a crowd sourced geo-database and also the biggest source for open map data. Data from OpenStreetMap is used for foot, bike and car routing in <a class="reference internal" href="glossary.html#term-OpenTripPlanner"><span class="xref std std-term">OpenTripPlanner</span></a>.</p>
<p>OpenStreetMap data also can be used for search (<a class="reference external" href="https://en.wikipedia.org/wiki/Geocoding">geocoding</a>) using <a class="reference internal" href="glossary.html#term-pelias"><span class="xref std std-term">pelias</span></a> or <a class="reference internal" href="glossary.html#term-photon"><span class="xref std std-term">photon</span></a> with <a class="reference external" href="https://github.com/stadtulm/photon-pelias-adapter">photon-pelias-adapter</a>.</p>
<p>You most likely don’t want the data for the whole planet (which would be available on <a class="reference external" href="https://planet.openstreetmap.org/">planet.openstreetmap.org</a>). Therefore extracts of counties and regions exists. <a class="reference external" href="https://www.geofabrik.de/en/index.html">Geofabrik</a> provides daily updated extracts for all countries and some smaller regions on their <a class="reference external" href="http://download.geofabrik.de/">download servers</a>.
Samller Extracts of custom regions can be generated using the <a class="reference external" href="https://extract.bbbike.org/">BBBike extract service</a>.</p>
<p>For the use in OpenTripPlanner you need to download the data in <code class="docutils literal notranslate"><span class="pre">.pbf</span></code>-Format (Protocolbuffer).</p>
<p>OpenStreetMap can also be used as background map. For that you need a <a class="reference external" href="https://wiki.openstreetmap.org/wiki/Tile_servers">Tile Server</a>. If you don’t want to setup your own Tile Server, there are many commercial providers for OpenStreetMap tile servers. Keep in mind that, most free tile severs are funded by donations and should not be used for extensive third party projects.</p>
</div>
<div class="section" id="parkendd-parkapi">
<span id="datasources-parkapi"></span><h2>ParkenDD ParkAPI<a class="headerlink" href="#parkendd-parkapi" title="Permalink to this headline">¶</a></h2>
<p>ParkenDD is a OpenSource Project collecting and scarping parking lot availablity data from different cities and provide them in a unified simple JSON format via <a class="reference external" href="https://github.com/offenesdresden/ParkAPI">ParkAPI</a>.
Data from ParkenDD or in ParkAPI format can be included in digitransit using <a class="reference internal" href="stadtnavi-extensions.html#stadtnavi-extensions-dynamic-parking-lots"><span class="std std-ref">stadtnavi extension dynamic parking lots</span></a>.</p>
<p>ParkAPI format is also descriped in JSON schema <a class="reference external" href="https://github.com/offenesdresden/ParkAPI/wiki/city.json">https://github.com/offenesdresden/ParkAPI/wiki/city.json</a></p>
<p>A map representation of the data can be found <a class="reference external" href="https://parkendd.de/en/map.html#Dresden">here</a>. You can find the integrated cities in the dropdown on the top right or in the <a class="reference external" href="https://github.com/offenesdresden/ParkAPI/tree/master/park_api/cities">github repo</a>. To integrate new cities you can look a the <a class="reference external" href="https://github.com/offenesdresden/ParkAPI/blob/master/park_api/cities/Sample_City.py">Sample_City script</a> and the <a class="reference external" href="https://github.com/offenesdresden/ParkAPI#adding-support-for-a-new-city">repos readme</a>.</p>
<p>A public API for all integrated cities is available at  <code class="docutils literal notranslate"><span class="pre">https://api.parkendd.de/</span></code>.</p>
</div>
<div class="section" id="geojson">
<h2>GeoJSON<a class="headerlink" href="#geojson" title="Permalink to this headline">¶</a></h2>
<p>GeoJSON is a popular Geodata format. GeoJSON supports the geometry types Point, LineString and Polygon. in GeoJSON each geometry can have custom properties including complex JSON structures. In digitransit GeoJSON-layers are a easy way to add custom geodata to the map. Examples are charging stations for electic vehicles or ticket zones. GeoJSON layers also support popups with custom content for each geometry.
Custom styling can be added directly into the GeoJSON file.</p>
<p>Be aware, that the complete GeoJSON file will be donwloaded by client. So GeoJSON should be only used for smaller layers and should not exceed a few hundred geometries. Also be aware, that external GeoJSON files needs to be deleiverd with CORS HTTP header. If you are using dynamic generated GeoJSON from external services, you should consider a server side caching proxy for that file.</p>
<p>To add a GeoJSON Layer to digitransit you only need to add the config to your <code class="docutils literal notranslate"><span class="pre">app/configurations/config.XXX.js</span></code> file in digitransit-ui.</p>
<p>A simple example would be</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span><span class="p">,</span>
<span class="n">geoJson</span><span class="p">:</span> <span class="p">{</span>
  <span class="n">layers</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="n">name</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">de</span><span class="p">:</span> <span class="s1">&#39;Ladesäulen&#39;</span><span class="p">,</span>
        <span class="n">en</span><span class="p">:</span> <span class="s1">&#39;Charging Stations&#39;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="o">//</span> <span class="n">web</span> <span class="n">address</span> <span class="n">of</span> <span class="n">the</span> <span class="n">data</span> <span class="n">source</span>
      <span class="n">url</span><span class="p">:</span> <span class="s1">&#39;http://&lt;URL-TO-GEOJSON&gt;/stations.geojson&#39;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Complete documentation including styling can be found in <a class="reference external" href="https://github.com/HSLdevcom/digitransit-ui/blob/master/docs/GeoJson.md">docs/GeoJSON</a>. For dynamic styling of the GeoJSON, you could manipulate the styling properties based on the data properties with a small external script before delivering the file to digitransit-ui.</p>
<p>Caution: Styling and popup-content behaves different if GeoJSON contains geometry types other than points. If the file only contians points, property <code class="docutils literal notranslate"><span class="pre">address</span></code> will be used for popup content ignoring HTML. If it contains other geometry types then points, popup content from property <code class="docutils literal notranslate"><span class="pre">popupContent</span></code> will be rendered as HTML and the geometries are rendered on all zoomlayers.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="glossary.html" class="btn btn-neutral float-right" title="Glossary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stadtnavi-extensions.html" class="btn btn-neutral float-left" title="Stadtnavi extensions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div class="cc0">
  <a href="https://creativecommons.org/publicdomain/zero/1.0/" rel="license">
    <svg aria-hidden="true" focusable="false" role="img" style="vertical-align: text-bottom;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" width="16" height="16"><path fill="#000" d="M245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93-22.13 0-33.22 14.61-33.22 43.84 0 23.57 9.21 43.84 33.22 43.84 14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98-22.6 0-73.96-10.32-73.96-77.05 0-58.69 43-77.06 72.63-77.06 30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93-22.14 0-33.22 14.61-33.22 43.84 0 23.55 9.23 43.84 33.22 43.84 14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98-22.69 0-73.96-9.87-73.96-77.05 0-58.67 42.97-77.06 72.63-77.06 30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248 129.93 0 248.44-100.87 248.44-248 0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81 0-105.42 85.43-203.27 203.72-203.27 112.53 0 202.82 89.46 202.82 203.26-.01 121.69-99.68 202.82-202.84 202.82z"></path></svg>
    <svg aria-hidden="true" focusable="false" role="img" style="vertical-align: text-bottom;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" width="16" height="16"><path fill="#000" d="M247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256 0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8 103.2 0 202.8-81.1 202.8-202.8.1-113.8-90.2-203.3-202.8-203.3zm-.4 60.5c-81.9 0-102.5 77.3-102.5 142.8 0 65.5 20.6 142.8 102.5 142.8S350.5 321.5 350.5 256c0-65.5-20.6-142.8-102.5-142.8zm0 53.9c3.3 0 6.4.5 9.2 1.2 5.9 5.1 8.8 12.1 3.1 21.9l-54.5 100.2c-1.7-12.7-1.9-25.1-1.9-34.4 0-28.8 2-88.9 44.1-88.9zm40.8 46.2c2.9 15.4 3.3 31.4 3.3 42.7 0 28.9-2 88.9-44.1 88.9-13.5 0-32.6-7.7-20.1-26.4l60.9-105.2z"></path></svg>
  </a>
  To the extent possible under law, the creators of this documentation
  have waived all copyrights and related or neighbouring rights
  to this work through the
  <a href="https://creativecommons.org/publicdomain/zero/1.0/">
    Creative Commons Zero Universal (CC0 1.0) Public Domain Dedication.
  </a>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>